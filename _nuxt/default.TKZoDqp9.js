import{L,a3 as we,c as f,r as xe,as as I,P as k,at as Ne,N as Ve,o as Ie,a1 as ke,au as Le,av as A,aw as R,a2 as z,g as ee,_ as te,q as T,t as ne,v as Ae,z as v,A as b,B as je,y as Pe,m as F,ao as Ee,ap as Oe,Z as Te,am as Me,ax as Re}from"./entry.dGBQf-sn.js";import{u as ze,m as B,n as se,i as oe,r as Be,j as De,a as Ue}from"./transition.A2pMAinb.js";import{c as He,_ as Ge,a as Ke}from"./VSelect.t3VrngQG.js";import{V as We,e as Ze}from"./VSheet.I06FjMZR.js";import"./VChip.Oh756D18.js";const J=Symbol.for("vuetify:layout"),qe=Symbol.for("vuetify:layout-item"),X=1e3,Fe=L({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Je=(e,t,n,s)=>{let o={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...o}}];for(const l of e){const r=t.get(l),d=n.get(l),m=s.get(l);if(!r||!d||!m)continue;const C={...o,[r.value]:parseInt(o[r.value],10)+(m.value?parseInt(d.value,10):0)};a.push({id:l,layer:C}),o=C}return a};function Xe(e){const t=we(J,null),n=f(()=>t?t.rootZIndex.value-100:X),s=xe([]),o=I(new Map),a=I(new Map),l=I(new Map),r=I(new Map),d=I(new Map),{resizeRef:m,contentRect:C}=ze(),me=f(()=>{const c=new Map,g=e.overlaps??[];for(const i of g.filter(p=>p.includes(":"))){const[p,u]=i.split(":");if(!s.value.includes(p)||!s.value.includes(u))continue;const y=o.get(p),S=o.get(u),x=a.get(p),N=a.get(u);!y||!S||!x||!N||(c.set(u,{position:y.value,amount:parseInt(x.value,10)}),c.set(p,{position:S.value,amount:-parseInt(N.value,10)}))}return c}),_=f(()=>{const c=[...new Set([...l.values()].map(i=>i.value))].sort((i,p)=>i-p),g=[];for(const i of c){const p=s.value.filter(u=>{var y;return((y=l.get(u))==null?void 0:y.value)===i});g.push(...p)}return Je(g,o,a,r)}),H=f(()=>!Array.from(d.values()).some(c=>c.value)),$=f(()=>_.value[_.value.length-1].layer),he=f(()=>({"--v-layout-left":k($.value.left),"--v-layout-right":k($.value.right),"--v-layout-top":k($.value.top),"--v-layout-bottom":k($.value.bottom),...H.value?void 0:{transition:"none"}})),w=f(()=>_.value.slice(1).map((c,g)=>{let{id:i}=c;const{layer:p}=_.value[g],u=a.get(i),y=o.get(i);return{id:i,...p,size:Number(u.value),position:y.value}})),G=c=>w.value.find(g=>g.id===c),j=Ne("createLayout"),K=Ve(!1);Ie(()=>{K.value=!0}),ke(J,{register:(c,g)=>{let{id:i,order:p,position:u,layoutSize:y,elementSize:S,active:x,disableTransitions:N,absolute:Se}=g;l.set(i,p),o.set(i,u),a.set(i,y),r.set(i,x),N&&d.set(i,N);const W=Le(qe,j==null?void 0:j.vnode).indexOf(c);W>-1?s.value.splice(W,0,i):s.value.push(i);const Z=f(()=>w.value.findIndex(V=>V.id===i)),P=f(()=>n.value+_.value.length*2-Z.value*2),Ce=f(()=>{const V=u.value==="left"||u.value==="right",E=u.value==="right",$e=u.value==="bottom",q={[u.value]:0,zIndex:P.value,transform:`translate${V?"X":"Y"}(${(x.value?0:-110)*(E||$e?-1:1)}%)`,position:Se.value||n.value!==X?"absolute":"fixed",...H.value?void 0:{transition:"none"}};if(!K.value)return q;const h=w.value[Z.value];if(!h)throw new Error(`[Vuetify] Could not find layout item "${i}"`);const O=me.value.get(i);return O&&(h[O.position]+=O.amount),{...q,height:V?`calc(100% - ${h.top}px - ${h.bottom}px)`:S.value?`${S.value}px`:void 0,left:E?void 0:`${h.left}px`,right:E?`${h.right}px`:void 0,top:u.value!=="bottom"?`${h.top}px`:void 0,bottom:u.value!=="top"?`${h.bottom}px`:void 0,width:V?S.value?`${S.value}px`:void 0:`calc(100% - ${h.left}px - ${h.right}px)`}}),_e=f(()=>({zIndex:P.value-1}));return{layoutItemStyles:Ce,layoutItemScrimStyles:_e,zIndex:P}},unregister:c=>{l.delete(c),o.delete(c),a.delete(c),r.delete(c),d.delete(c),s.value=s.value.filter(g=>g!==c)},mainRect:$,mainStyles:he,getLayoutItem:G,items:w,layoutRect:C,rootZIndex:n});const ye=f(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),be=f(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:ye,layoutStyles:be,getLayoutItem:G,items:w,layoutRect:C,layoutRef:m}}const ae=A.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),ie=A.reduce((e,t)=>{const n="offset"+R(t);return e[n]={type:[String,Number],default:null},e},{}),le=A.reduce((e,t)=>{const n="order"+R(t);return e[n]={type:[String,Number],default:null},e},{}),Y={col:Object.keys(ae),offset:Object.keys(ie),order:Object.keys(le)};function Ye(e,t,n){let s=e;if(!(n==null||n===!1)){if(t){const o=t.replace(e,"");s+=`-${o}`}return e==="col"&&(s="v-"+s),e==="col"&&(n===""||n===!0)||(s+=`-${n}`),s.toLowerCase()}}const Qe=["auto","start","end","center","baseline","stretch"],et=L({cols:{type:[Boolean,String,Number],default:!1},...ae,offset:{type:[String,Number],default:null},...ie,order:{type:[String,Number],default:null},...le,alignSelf:{type:String,default:null,validator:e=>Qe.includes(e)},...B(),...se()},"VCol"),M=z()({name:"VCol",props:et(),setup(e,t){let{slots:n}=t;const s=f(()=>{const o=[];let a;for(a in Y)Y[a].forEach(r=>{const d=e[r],m=Ye(a,r,d);m&&o.push(m)});const l=o.some(r=>r.startsWith("v-col-"));return o.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),o});return()=>{var o;return ee(e.tag,{class:[s.value,e.class],style:e.style},(o=n.default)==null?void 0:o.call(n))}}}),D=["start","end","center"],ce=["space-between","space-around","space-evenly"];function U(e,t){return A.reduce((n,s)=>{const o=e+R(s);return n[o]=t(),n},{})}const tt=[...D,"baseline","stretch"],re=e=>tt.includes(e),ue=U("align",()=>({type:String,default:null,validator:re})),nt=[...D,...ce],de=e=>nt.includes(e),fe=U("justify",()=>({type:String,default:null,validator:de})),st=[...D,...ce,"stretch"],pe=e=>st.includes(e),ve=U("alignContent",()=>({type:String,default:null,validator:pe})),Q={align:Object.keys(ue),justify:Object.keys(fe),alignContent:Object.keys(ve)},ot={align:"align",justify:"justify",alignContent:"align-content"};function at(e,t,n){let s=ot[e];if(n!=null){if(t){const o=t.replace(e,"");s+=`-${o}`}return s+=`-${n}`,s.toLowerCase()}}const it=L({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:re},...ue,justify:{type:String,default:null,validator:de},...fe,alignContent:{type:String,default:null,validator:pe},...ve,...B(),...se()},"VRow"),lt=z()({name:"VRow",props:it(),setup(e,t){let{slots:n}=t;const s=f(()=>{const o=[];let a;for(a in Q)Q[a].forEach(l=>{const r=e[l],d=at(a,l,r);d&&o.push(d)});return o.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),o});return()=>{var o;return ee(e.tag,{class:["v-row",s.value,e.class],style:e.style},(o=n.default)==null?void 0:o.call(n))}}}),ct={setup(){return{store:oe()}},data:()=>({select:null,selector:[{id:1,text:"Color",page:"/color"},{id:2,text:"Effect",page:"/effect"},{id:0,text:"Dmx Mode 0",page:"/config"},{id:3,text:"Dmx Mode 1",page:"/config"}]}),async mounted(){this.store.btAvailable=await this.$espconfig.getAvailability(),console.log(this.store.btAvailable),this.store.btAvailable?this.setEspConfig():this.store.btIcon="mdi-close-box"},methods:{async onConnected(){const{$event:e}=F();this.store.btStat=!0,this.btnHandler("disconnect"),this.store.apName=this.$espconfig.device.name,console.log(this.store.apName),await this.recieveCredentials(),this.select=this.selector.find(t=>t.id===this.store.config.mode),console.log(this.select),T(this.select.page),e("bt:connected")},onDisconnected(){const{$event:e}=F();this.store.btStat=!1,this.btnHandler("connect"),this.store.apName="",this.select=null,T("/"),e("bt:disconnected")},setEspConfig(){this.$espconfig.setSsidListUuid("1d338124-7ddc-449e-afc7-67f8673a1160"),this.$espconfig.setConnectionStatusUuid("5b3595c4-ad4f-4e1e-954e-3b290cc02eb0"),this.$espconfig.setOnConnected(this.onConnected),this.$espconfig.setOnDisconnected(this.onDisconnected)},async recieveCredentials(){let e;const t=new TextDecoder("windows-1252"),n=await this.$espconfig.readCredentials();e=Be(this.store.apName,n),e=t.decode(e),console.log(e),this.store.config=JSON.parse(e),await this.recieveWifiList(),this.$espconfig.connectionStatusUuid&&await this.$espconfig.startConnectionstatusNotifications(s=>{this.apStatus=s.target.value.getUint8()})},async recieveWifiList(){if(this.$espconfig.ssidListUuid){const e=new TextDecoder("windows-1252");let t=await this.$espconfig.readSsidlist();if(t)return t=e.decode(t),t=JSON.parse(t),this.wifiList=t.SSID,t;this.dropdownMessage="-- SSID from ESP32 --"}},async connectClick(){console.log(this.$espconfig),this.store.btStat?await this.$espconfig.disconnect():(this.btnHandler("searching"),await this.$espconfig.request().then(e=>this.$espconfig.connect()).catch(e=>{throw this.btnHandler("connect"),e}))},btnHandler(e){switch(e){case"connect":this.store.btBtnText="Connect ",this.store.btIcon="mdi-bluetooth";break;case"disconnect":this.store.btBtnText="Disconnect ",this.store.btIcon="mdi-bluetooth-off";break;case"searching":this.store.btBtnText="Connecting... ",this.store.btIcon="mdi-bluetooth-connect";break}},onSelect(e){console.log("update",e.page),this.store.config.mode=e.id,this.$espconfig.writeEffect(De(this.store.apName,{mode:this.store.config.mode})),console.log(this.store.config),T(e.page)}}};function rt(e,t,n,s,o,a){return ne(),Ae("div",null,[v(Ze,{"no-gutters":"",class:"pa-0 ma-0"},{default:b(()=>[v(lt,null,{default:b(()=>[v(M,null,{default:b(()=>[v(We,{"prepend-icon":s.store.btIcon,onClick:a.connectClick},{default:b(()=>[je(Pe(s.store.btBtnText),1)]),_:1},8,["prepend-icon","onClick"])]),_:1}),v(M,null,{default:b(()=>[v(He,{density:"compact","hide-details":"auto",label:"Mode","hide-selected":"",disabled:!s.store.btStat,items:e.selector,"item-title":"text","item-value":"id",modelValue:e.select,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.select=l),a.onSelect],"return-object":""},null,8,["disabled","items","modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})])}const ge=te(ct,[["render",rt]]),ut=L({...B(),...Fe({fullHeight:!0}),...Ee()},"VApp"),dt=z()({name:"VApp",props:ut(),setup(e,t){let{slots:n}=t;const s=Oe(e),{layoutClasses:o,getLayoutItem:a,items:l,layoutRef:r}=Xe(e),{rtlClasses:d}=Te();return Ue(()=>{var m;return v("div",{ref:r,class:["v-application",s.themeClasses.value,o.value,d.value,e.class],style:[e.style]},[v("div",{class:"v-application__wrap"},[(m=n.default)==null?void 0:m.call(n)])])}),{getLayoutItem:a,items:l,theme:s}}}),ft={setup(){return{store:oe()}},components:{Navbar:ge}};function pt(e,t,n,s,o,a){const l=ge,r=Re,d=Ge;return ne(),Me(d,null,{default:b(()=>[v(dt,null,{default:b(()=>[v(l),v(Ke,null,{default:b(()=>[v(M,null,{default:b(()=>[v(r)]),_:1})]),_:1})]),_:1})]),_:1})}const St=te(ft,[["render",pt]]);export{St as default};
