import{f as Z,m as $,V as F,_ as ee,a as te,b as f,c as _}from"./VSelect.BLL9UJYC.js";import{L as z,a9 as O,r as W,z as i,a5 as L,c as B,aa as se,ab as le,a8 as N,ac as oe,_ as ie,ad as ae,A as c,m as R,t as ne,ae as T,af as de,ag as re,x as I,B as x}from"./entry.DtaIAnso.js";import{m as ue,g as ce,h as me,a as j,i as fe,k as be,l as Ve,n as M,o as ve,p as ge,b as Se,L as ye,q as he,e as pe,j as U,V as D,d as we}from"./VSheet.CvhWZdrt.js";const ke=z({...ue(),...ce()},"VForm"),Ce=O()({name:"VForm",props:ke(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:m,emit:s}=t;const l=me(e),a=W();function b(d){d.preventDefault(),l.reset()}function o(d){const r=d,n=l.validate();r.then=n.then.bind(n),r.catch=n.catch.bind(n),r.finally=n.finally.bind(n),s("submit",r),r.defaultPrevented||n.then(h=>{var v;let{valid:p}=h;p&&((v=a.value)==null||v.submit())}),r.preventDefault()}return j(()=>{var d;return i("form",{ref:a,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:b,onSubmit:o},[(d=m.default)==null?void 0:d.call(m,l)])}),Z(l,a)}}),Pe=z({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...fe(),...$()},"VSwitch"),xe=O()({name:"VSwitch",inheritAttrs:!1,props:Pe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:m,slots:s}=t;const l=L(e,"indeterminate"),a=L(e,"modelValue"),{loaderClasses:b}=be(e),{isFocused:o,focus:d,blur:r}=Ve(e),n=W(),h=B(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),p=se(),v=B(()=>e.id||`switch-${p}`);function q(){l.value&&(l.value=!1)}function E(g){var S,y;g.stopPropagation(),g.preventDefault(),(y=(S=n.value)==null?void 0:S.input)==null||y.click()}return j(()=>{const[g,S]=le(m),y=M.filterProps(e),J=F.filterProps(e);return i(M,N({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":l.value},b.value,e.class]},g,y,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,id:v.value,focused:o.value,style:e.style}),{...s,default:w=>{let{id:X,messagesId:G,isDisabled:H,isReadonly:K,isValid:A}=w;const k={model:a,isValid:A};return i(F,N({ref:n},J,{modelValue:a.value,"onUpdate:modelValue":[V=>a.value=V,q],id:X.value,"aria-describedby":G.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:H.value,readonly:K.value,onFocus:d,onBlur:r},S),{...s,default:V=>{let{backgroundColorClasses:C,backgroundColorStyles:u}=V;return i("div",{class:["v-switch__track",...C.value],style:u.value,onClick:E},[s["track-true"]&&i("div",{key:"prepend",class:"v-switch__track-true"},[s["track-true"](k)]),s["track-false"]&&i("div",{key:"append",class:"v-switch__track-false"},[s["track-false"](k)])])},input:V=>{let{inputNode:C,icon:u,backgroundColorClasses:Q,backgroundColorStyles:Y}=V;return i(oe,null,[C,i("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":u||e.loading},e.inset?void 0:Q.value],style:e.inset?void 0:Y.value},[s.thumb?i(ve,{defaults:{VIcon:{icon:u,size:"x-small"}}},{default:()=>[s.thumb({...k,icon:u})]}):i(ge,null,{default:()=>[e.loading?i(ye,{name:"v-switch",active:!0,color:A.value===!1?void 0:h.value},{default:P=>s.loader?s.loader(P):i(he,{active:P.isActive,color:P.color,indeterminate:!0,size:"16",width:"2"},null)}):u&&i(Se,{key:String(u),icon:u,size:"x-small"},null)]})])])}})}})}),{}}}),Ue={setup(){return{store:pe()}},data(){return{wifiList:[],apStatus:-1,show1:!1,show2:!1,secondary:!1,isValid:!0}},computed:{},created(){const{$listen:e}=R();e("bt:connected",()=>{console.log("bt connected")}),e("bt:disconnected",()=>{console.log("bt disconnected"),this.$refs.form.reset()})},mounted(){this.recieveWifiList()},beforeDestroy(){const{$off:e}=R();e("bt:connected",{}),e("bt:disconnected",{})},methods:{ruleDmx:e=>!e||/^[0-9]{0,3}$/.test(e.toString())&&e>=1&&e<=512||"The field must be a valid decimal 1 to 512",ruleUniverse:e=>!e||/^[0-9]{0,2}$/.test(e.toString())&&e>=0&&e<=15||"The field must be a valid decimal 0 to 15",async recieveWifiList(){if(this.$espconfig.ssidListUuid){const e=new TextDecoder("windows-1252");let t=await this.$espconfig.readSsidlist();if(t)return t=e.decode(t),t=JSON.parse(t),this.wifiList=t.SSID,t;this.dropdownMessage="-- SSID from ESP32 --"}},async submit(e){console.log(this.store.config),this.$espconfig.writeCredentials(U(this.store.apName,this.store.config))},reset(e){this.$espconfig.writeCredentials(U(this.store.apName,{reset:""}))},identify(e){this.$espconfig.writeCredentials(U(this.store.apName,{identify:""}))}}},De=I("h2",null,"WiFi configuration",-1),Ie=I("h2",null,"DMX configuration",-1);function Ae(e,t,m,s,l,a){const b=ee;return ne(),ae(b,null,{default:c(()=>[i(we,null,{default:c(()=>[i(Ce,{ref:"form",method:"POST",onSubmit:T(a.submit,["prevent"]),onReset:T(a.reset,["prevent"]),class:"ga-0",modelValue:l.isValid,"onUpdate:modelValue":t[11]||(t[11]=o=>l.isValid=o),disabled:!s.store.btStat},{default:c(()=>[i(te,{fluid:""},{default:c(()=>[De,i(f,{label:"Primary SSID","hide-details":"auto",modelValue:s.store.config.ssidPrim,"onUpdate:modelValue":t[0]||(t[0]=o=>s.store.config.ssidPrim=o)},null,8,["modelValue"]),i(_,{label:"Available SSIDs",density:"compact","hide-details":"auto",items:l.wifiList,modelValue:s.store.config.ssidPrim,"onUpdate:modelValue":t[1]||(t[1]=o=>s.store.config.ssidPrim=o)},null,8,["items","modelValue"]),i(f,{"hide-details":"auto",modelValue:s.store.config.pwPrim,"onUpdate:modelValue":t[2]||(t[2]=o=>s.store.config.pwPrim=o),"append-icon":l.show1?"mdi-eye":"mdi-eye-off",type:l.show1?"text":"password",label:"Primary password","onClick:append":t[3]||(t[3]=o=>l.show1=!l.show1)},null,8,["modelValue","append-icon","type"]),i(xe,{modelValue:l.secondary,"onUpdate:modelValue":t[4]||(t[4]=o=>l.secondary=o),label:"Use secondary SSID"},null,8,["modelValue"]),de(I("div",null,[i(f,{label:"Secondary SSID","hide-details":"auto",modelValue:s.store.config.ssidSec,"onUpdate:modelValue":t[5]||(t[5]=o=>s.store.config.ssidSec=o),disabled:!l.secondary},null,8,["modelValue","disabled"]),i(_,{label:"Available SSIDs",density:"compact","hide-details":"auto",items:l.wifiList,modelValue:s.store.config.ssidSec,"onUpdate:modelValue":t[6]||(t[6]=o=>s.store.config.ssidSec=o),disabled:!l.secondary},null,8,["items","modelValue","disabled"]),i(f,{modelValue:s.store.config.pwSec,"onUpdate:modelValue":t[7]||(t[7]=o=>s.store.config.pwSec=o),"append-icon":l.show2?"mdi-eye":"mdi-eye-off",type:l.show2?"text":"password",disabled:!l.secondary,label:"Secondary password","hide-details":"auto","onClick:append":t[8]||(t[8]=o=>l.show2=!l.show2)},null,8,["modelValue","append-icon","type","disabled"])],512),[[re,l.secondary]]),Ie,i(f,{label:"Start address","hide-details":"auto",rules:[o=>a.ruleDmx(o)],modelValue:s.store.config.stAddr,"onUpdate:modelValue":t[9]||(t[9]=o=>s.store.config.stAddr=o)},null,8,["rules","modelValue"]),i(f,{label:"ArtNet universe","hide-details":"auto",rules:[o=>a.ruleUniverse(o)],modelValue:s.store.config.stUni,"onUpdate:modelValue":t[10]||(t[10]=o=>s.store.config.stUni=o)},null,8,["rules","modelValue"]),i(D,{type:"submit",disabled:!(s.store.btStat&&l.isValid)},{default:c(()=>[x(" Save")]),_:1},8,["disabled"]),i(D,{type:"reset",disabled:!s.store.btStat},{default:c(()=>[x("Reboot")]),_:1},8,["disabled"]),i(D,{onClick:a.identify,disabled:!s.store.btStat},{default:c(()=>[x("Identify")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["onSubmit","onReset","modelValue","disabled"])]),_:1})]),_:1})}const Be=ie(Ue,[["render",Ae]]);export{Be as default};
